# üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Frontend —Å Backend API

## üìã –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `apps/frontend/.env.local`:

```env
# API Configuration
NEXT_PUBLIC_API_URL=http://localhost:4000
NEXT_PUBLIC_API_BASE_URL=http://localhost:4000/api/v1

# Site Configuration
NEXT_PUBLIC_SITE_NAME=ALed Store
NEXT_PUBLIC_SITE_URL=http://localhost:3000
```

### –®–∞–≥ 2: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ API –∫–ª–∏–µ–Ω—Ç

–Ø —Å–æ–∑–¥–∞–ª –≥–æ—Ç–æ–≤—ã–π API –∫–ª–∏–µ–Ω—Ç –≤ `apps/frontend/lib/api-client.ts`

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö:**

```typescript
import { api } from '@/lib/api-client';

// –í Server Component (Next.js 14 App Router)
export default async function ProductsPage() {
  const { data: products } = await api.getProducts({ page: 1, limit: 24 });

  return (
    <div>
      {products.map(product => (
        <ProductCard key={product.id} product={product} />
      ))}
    </div>
  );
}
```

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### 1. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞—Ç–∞–ª–æ–≥–∞ —Ç–æ–≤–∞—Ä–æ–≤

**`apps/frontend/app/products/page.tsx`:**

```typescript
import { api } from '@/lib/api-client';
import { ProductCard } from '@/components/ProductCard';

export default async function ProductsPage({
  searchParams,
}: {
  searchParams: { page?: string; category?: string; search?: string };
}) {
  const page = parseInt(searchParams.page || '1');
  const category = searchParams.category;
  const search = searchParams.search;

  // –ü–æ–ª—É—á–∞–µ–º —Ç–æ–≤–∞—Ä—ã —Å API
  const { data: products, meta } = await api.getProducts({
    page,
    limit: 24,
    category,
    search,
  });

  // –ü–æ–ª—É—á–∞–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  const { data: categories } = await api.getCategories();

  return (
    <div className="container mx-auto px-4 py-8">
      <h1 className="text-3xl font-bold mb-8">–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤</h1>

      {/* –§–∏–ª—å—Ç—Ä—ã */}
      <div className="flex gap-4 mb-8">
        <CategoryFilter categories={categories} />
        <SearchFilter />
      </div>

      {/* –°–µ—Ç–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ */}
      <div className="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6">
        {products.map((product) => (
          <ProductCard key={product.id} product={product} />
        ))}
      </div>

      {/* –ü–∞–≥–∏–Ω–∞—Ü–∏—è */}
      {meta && <Pagination currentPage={page} totalPages={meta.totalPages} />}
    </div>
  );
}
```

### 2. –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–æ–≤–∞—Ä–∞

**`apps/frontend/app/products/[slug]/page.tsx`:**

```typescript
import { api } from '@/lib/api-client';
import { AddToCartButton } from '@/components/AddToCartButton';
import { ProductGallery } from '@/components/ProductGallery';
import { ProductReviews } from '@/components/ProductReviews';

export default async function ProductPage({
  params,
}: {
  params: { slug: string };
}) {
  const { data: product } = await api.getProduct(params.slug);
  const { data: relatedProducts } = await api.getRelatedProducts(product.id);
  const { data: reviews } = await api.getProductReviews(product.id);

  return (
    <div className="container mx-auto px-4 py-8">
      <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
        {/* –ì–∞–ª–µ—Ä–µ—è */}
        <ProductGallery images={product.images} />

        {/* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è */}
        <div>
          <h1 className="text-3xl font-bold mb-4">{product.name}</h1>
          
          <div className="mb-4">
            {product.oldPrice && (
              <span className="text-gray-500 line-through mr-2">
                {product.oldPrice} ‚ÇΩ
              </span>
            )}
            <span className="text-2xl font-bold text-blue-600">
              {product.price} ‚ÇΩ
            </span>
          </div>

          <p className="text-gray-600 mb-6">{product.description}</p>

          {/* –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É */}
          <AddToCartButton productId={product.id} />

          {/* –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ */}
          <div className="mt-8">
            <h3 className="font-bold mb-2">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:</h3>
            <ul className="space-y-2">
              <li><strong>SKU:</strong> {product.sku}</li>
              <li><strong>–í –Ω–∞–ª–∏—á–∏–∏:</strong> {product.stock} —à—Ç.</li>
              <li><strong>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</strong> {product.category.name}</li>
            </ul>
          </div>
        </div>
      </div>

      {/* –û—Ç–∑—ã–≤—ã */}
      <div className="mt-12">
        <ProductReviews reviews={reviews} productId={product.id} />
      </div>

      {/* –ü–æ—Ö–æ–∂–∏–µ —Ç–æ–≤–∞—Ä—ã */}
      {relatedProducts.length > 0 && (
        <div className="mt-12">
          <h2 className="text-2xl font-bold mb-6">–ü–æ—Ö–æ–∂–∏–µ —Ç–æ–≤–∞—Ä—ã</h2>
          <div className="grid grid-cols-1 md:grid-cols-4 gap-6">
            {relatedProducts.map((p) => (
              <ProductCard key={p.id} product={p} />
            ))}
          </div>
        </div>
      )}
    </div>
  );
}
```

### 3. –ö–æ—Ä–∑–∏–Ω–∞ (Client Component)

**`apps/frontend/app/cart/page.tsx`:**

```typescript
'use client';

import { useEffect, useState } from 'react';
import { api } from '@/lib/api-client';
import { useRouter } from 'next/navigation';

export default function CartPage() {
  const [cart, setCart] = useState<any>(null);
  const [loading, setLoading] = useState(true);
  const router = useRouter();

  useEffect(() => {
    loadCart();
  }, []);

  async function loadCart() {
    try {
      const sessionId = localStorage.getItem('sessionId');
      const { data } = await api.getCart(sessionId);
      setCart(data);
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ—Ä–∑–∏–Ω—ã:', error);
    } finally {
      setLoading(false);
    }
  }

  async function updateQuantity(itemId: string, quantity: number) {
    try {
      await api.updateCartItem(itemId, quantity);
      await loadCart();
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:', error);
    }
  }

  async function removeItem(itemId: string) {
    try {
      await api.removeFromCart(itemId);
      await loadCart();
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è:', error);
    }
  }

  if (loading) return <div>–ó–∞–≥—Ä—É–∑–∫–∞...</div>;

  if (!cart || cart.items.length === 0) {
    return (
      <div className="container mx-auto px-4 py-8 text-center">
        <h1 className="text-2xl font-bold mb-4">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</h1>
        <button
          onClick={() => router.push('/products')}
          className="bg-blue-600 text-white px-6 py-2 rounded"
        >
          –ü–µ—Ä–µ–π—Ç–∏ –∫ –ø–æ–∫—É–ø–∫–∞–º
        </button>
      </div>
    );
  }

  return (
    <div className="container mx-auto px-4 py-8">
      <h1 className="text-3xl font-bold mb-8">–ö–æ—Ä–∑–∏–Ω–∞</h1>

      <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
        {/* –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ */}
        <div className="lg:col-span-2 space-y-4">
          {cart.items.map((item: any) => (
            <div key={item.id} className="flex gap-4 border p-4 rounded">
              <img
                src={item.product.images?.[0] || '/placeholder.jpg'}
                alt={item.product.name}
                className="w-24 h-24 object-cover rounded"
              />
              
              <div className="flex-1">
                <h3 className="font-bold">{item.product.name}</h3>
                <p className="text-gray-600">{item.priceAtAdd} ‚ÇΩ</p>
                
                <div className="flex items-center gap-2 mt-2">
                  <button
                    onClick={() => updateQuantity(item.id, item.qty - 1)}
                    className="px-2 py-1 border rounded"
                  >
                    -
                  </button>
                  <span>{item.qty}</span>
                  <button
                    onClick={() => updateQuantity(item.id, item.qty + 1)}
                    className="px-2 py-1 border rounded"
                  >
                    +
                  </button>
                  <button
                    onClick={() => removeItem(item.id)}
                    className="ml-auto text-red-600"
                  >
                    –£–¥–∞–ª–∏—Ç—å
                  </button>
                </div>
              </div>
            </div>
          ))}
        </div>

        {/* –ò—Ç–æ–≥–æ */}
        <div className="border p-6 rounded h-fit">
          <h2 className="text-xl font-bold mb-4">–ò—Ç–æ–≥–æ</h2>
          
          <div className="space-y-2 mb-4">
            <div className="flex justify-between">
              <span>–¢–æ–≤–∞—Ä—ã:</span>
              <span>{cart.subtotal} ‚ÇΩ</span>
            </div>
            <div className="flex justify-between font-bold text-lg">
              <span>–í—Å–µ–≥–æ:</span>
              <span>{cart.total} ‚ÇΩ</span>
            </div>
          </div>

          <button
            onClick={() => router.push('/checkout')}
            className="w-full bg-blue-600 text-white py-3 rounded font-bold hover:bg-blue-700"
          >
            –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
          </button>
        </div>
      </div>
    </div>
  );
}
```

### 4. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç "–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É"

**`apps/frontend/components/AddToCartButton.tsx`:**

```typescript
'use client';

import { useState } from 'react';
import { api } from '@/lib/api-client';

export function AddToCartButton({ productId }: { productId: string }) {
  const [loading, setLoading] = useState(false);
  const [added, setAdded] = useState(false);

  async function handleAddToCart() {
    setLoading(true);
    try {
      await api.addToCart(productId, 1);
      setAdded(true);
      setTimeout(() => setAdded(false), 2000);
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É:', error);
    } finally {
      setLoading(false);
    }
  }

  return (
    <button
      onClick={handleAddToCart}
      disabled={loading || added}
      className="bg-blue-600 text-white px-8 py-3 rounded-lg font-bold hover:bg-blue-700 disabled:bg-gray-400"
    >
      {loading ? '–î–æ–±–∞–≤–ª–µ–Ω–∏–µ...' : added ? '‚úì –î–æ–±–∞–≤–ª–µ–Ω–æ!' : '–í –∫–æ—Ä–∑–∏–Ω—É'}
    </button>
  );
}
```

### 5. –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞

**`apps/frontend/app/checkout/page.tsx`:**

```typescript
'use client';

import { useState } from 'react';
import { api } from '@/lib/api-client';
import { useRouter } from 'next/navigation';

export default function CheckoutPage() {
  const router = useRouter();
  const [formData, setFormData] = useState({
    email: '',
    phone: '',
    city: '',
    street: '',
    building: '',
    apartment: '',
    paymentMethod: 'card',
    notes: '',
  });

  async function handleSubmit(e: React.FormEvent) {
    e.preventDefault();

    try {
      const { data: order } = await api.createOrder({
        email: formData.email,
        phone: formData.phone,
        shippingAddress: {
          city: formData.city,
          street: formData.street,
          building: formData.building,
          apartment: formData.apartment,
        },
        paymentMethod: formData.paymentMethod,
        notes: formData.notes,
      });

      // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —É—Å–ø–µ—Ö–∞
      router.push(`/order/${order.id}/success`);
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞:', error);
      alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞');
    }
  }

  return (
    <div className="container mx-auto px-4 py-8 max-w-2xl">
      <h1 className="text-3xl font-bold mb-8">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h1>

      <form onSubmit={handleSubmit} className="space-y-6">
        {/* –ö–æ–Ω—Ç–∞–∫—Ç—ã */}
        <div>
          <h2 className="text-xl font-bold mb-4">–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h2>
          <div className="space-y-4">
            <input
              type="email"
              placeholder="Email"
              value={formData.email}
              onChange={(e) => setFormData({ ...formData, email: e.target.value })}
              className="w-full border px-4 py-2 rounded"
              required
            />
            <input
              type="tel"
              placeholder="–¢–µ–ª–µ—Ñ–æ–Ω"
              value={formData.phone}
              onChange={(e) => setFormData({ ...formData, phone: e.target.value })}
              className="w-full border px-4 py-2 rounded"
              required
            />
          </div>
        </div>

        {/* –ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏ */}
        <div>
          <h2 className="text-xl font-bold mb-4">–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</h2>
          <div className="space-y-4">
            <input
              type="text"
              placeholder="–ì–æ—Ä–æ–¥"
              value={formData.city}
              onChange={(e) => setFormData({ ...formData, city: e.target.value })}
              className="w-full border px-4 py-2 rounded"
              required
            />
            <input
              type="text"
              placeholder="–£–ª–∏—Ü–∞"
              value={formData.street}
              onChange={(e) => setFormData({ ...formData, street: e.target.value })}
              className="w-full border px-4 py-2 rounded"
              required
            />
            <div className="grid grid-cols-2 gap-4">
              <input
                type="text"
                placeholder="–î–æ–º"
                value={formData.building}
                onChange={(e) => setFormData({ ...formData, building: e.target.value })}
                className="border px-4 py-2 rounded"
                required
              />
              <input
                type="text"
                placeholder="–ö–≤–∞—Ä—Ç–∏—Ä–∞"
                value={formData.apartment}
                onChange={(e) => setFormData({ ...formData, apartment: e.target.value })}
                className="border px-4 py-2 rounded"
              />
            </div>
          </div>
        </div>

        {/* –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã */}
        <div>
          <h2 className="text-xl font-bold mb-4">–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</h2>
          <select
            value={formData.paymentMethod}
            onChange={(e) => setFormData({ ...formData, paymentMethod: e.target.value })}
            className="w-full border px-4 py-2 rounded"
          >
            <option value="card">–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞</option>
            <option value="cash">–ù–∞–ª–∏—á–Ω—ã–º–∏ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏</option>
            <option value="online">–û–Ω–ª–∞–π–Ω-–æ–ø–ª–∞—Ç–∞</option>
          </select>
        </div>

        {/* –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π */}
        <div>
          <h2 className="text-xl font-bold mb-4">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É</h2>
          <textarea
            placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"
            value={formData.notes}
            onChange={(e) => setFormData({ ...formData, notes: e.target.value })}
            className="w-full border px-4 py-2 rounded h-24"
          />
        </div>

        <button
          type="submit"
          className="w-full bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700"
        >
          –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
        </button>
      </form>
    </div>
  );
}
```

## üöÄ –ó–∞–ø—É—Å–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

### –¢–µ—Ä–º–∏–Ω–∞–ª 1 - Backend API:
```powershell
start-demo.bat
```

### –¢–µ—Ä–º–∏–Ω–∞–ª 2 - Frontend:
```powershell
cd apps/frontend
npm run dev
```

–¢–µ–ø–µ—Ä—å –≤–∞—à —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å —Ä–µ–∞–ª—å–Ω–æ–≥–æ API!

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å:
- ‚úÖ Backend API —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ http://localhost:4000
- ‚úÖ Frontend —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ http://localhost:3000
- ‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç —Å API
- ‚úÖ –ö–æ—Ä–∑–∏–Ω–∞, –∑–∞–∫–∞–∑—ã, —Ç–æ–≤–∞—Ä—ã - –≤—Å–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ

